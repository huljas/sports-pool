import org.junit.*;
import java.util.*;
import play.test.*;
import models.*;

import static org.junit.Assert.assertEquals;

public class GroupTest {

    public String response = "   aistable( {\"data\" : {\"payload\" : \" <div class='container-narrow-table'> <div class='league-table table-narrow'> <h2 class='table-header'>As It Stands Table</h2> <div class='drop-down-filter'>   <form method='get' id='ais-filter-nav'> <fieldset> <label for='single-competition-drop-down'>Show me:</label><select id='single-competition-drop-down' name='competitionFilter'>   <option value='118996114' > Premier League </option>    <option value='118996115' > Championship </option>    <option value='118996116' > League One </option>    <option value='118996117' > League Two </option>    <option value='118996118' > Conference Premier </option>    <option value='118996176' > Scottish Premier League </option>    <option value='118996177' > Scottish First Division </option>    <option value='118996178' > Scottish Second Division </option>    <option value='118996179' > Scottish Third Division </option>    <option value='118999958' > Champions League </option>    <option value='118999989' > Europa League </option>    <option value='119002035' selected='selected'> European Championship </option>   </select> <input id='single-filter-nav-submit' type='submit' value='Update' /> </fieldset> </form>  </div>         <h3 class='competition-name'>Group A</h3>  <table class='table-stats' id='ais_table_119002035'> <caption>UEFA European Championship Group A summary table; it charts each team by position, team name, games played, total goal difference and points</caption>  <thead> <tr class='header'> <th class='position' scope='col' title='Position'>Pos<span>ition</span></th> <th class='team-name' scope='col'>Team</th> <th class='played' scope='col' title='Played'>P<span>layed</span></th> <th class='goal-difference' scope='col' title='Goal Difference'>G<span>oal </span>D<span>ifference</span></th> <th class='points' scope='col' title='Points'>P<span>oin</span>ts</th> </tr> </thead>  <tfoot>   <tr> <td colspan='5'> <p class='full-table-link'><a href='http://www.bbc.co.uk/sport/football/european-championship/table'>View full table</a></p> </td> </tr>    </tfoot>  <tbody>    <tr class='team first'>   <td class='position'><span class='no-movement'>No movement</span> <span class='position-number'>1</span></td>   <td class='team-name'>  <a href='http://www.bbc.co.uk/sport/football/teams/czech-republic'>Czech Rep.</a>  </td> <td class='played'>0</td> <td class='goal-difference'>0</td> <td class='points'>0</td> </tr>     <tr class='team'>   <td class='position'><span class='no-movement'>No movement</span> <span class='position-number'>2</span></td>   <td class='team-name'>  <a href='http://www.bbc.co.uk/sport/football/teams/greece'>Greece</a>  </td> <td class='played'>0</td> <td class='goal-difference'>0</td> <td class='points'>0</td> </tr>     <tr class='team'>   <td class='position'><span class='no-movement'>No movement</span> <span class='position-number'>3</span></td>   <td class='team-name'>  <a href='http://www.bbc.co.uk/sport/football/teams/poland'>Poland</a>  </td> <td class='played'>0</td> <td class='goal-difference'>0</td> <td class='points'>0</td> </tr>     <tr class='team'>   <td class='position'><span class='no-movement'>No movement</span> <span class='position-number'>4</span></td>   <td class='team-name'>  <a href='http://www.bbc.co.uk/sport/football/teams/russia'>Russia</a>  </td> <td class='played'>0</td> <td class='goal-difference'>0</td> <td class='points'>0</td> </tr>   </tbody>  </table>         <h3 class='competition-name'>Group B</h3>  <table class='table-stats' id='ais_table_119002035'> <caption>UEFA European Championship Group B summary table; it charts each team by position, team name, games played, total goal difference and points</caption>  <thead> <tr class='header'> <th class='position' scope='col' title='Position'>Pos<span>ition</span></th> <th class='team-name' scope='col'>Team</th> <th class='played' scope='col' title='Played'>P<span>layed</span></th> <th class='goal-difference' scope='col' title='Goal Difference'>G<span>oal </span>D<span>ifference</span></th> <th class='points' scope='col' title='Points'>P<span>oin</span>ts</th> </tr> </thead>  <tfoot>   <tr> <td colspan='5'> <p class='full-table-link'><a href='http://www.bbc.co.uk/sport/football/european-championship/table'>View full table</a></p> </td> </tr>    </tfoot>  <tbody>    <tr class='team first'>   <td class='position'><span class='no-movement'>No movement</span> <span class='position-number'>1</span></td>   <td class='team-name'>  <a href='http://www.bbc.co.uk/sport/football/teams/denmark'>Denmark</a>  </td> <td class='played'>0</td> <td class='goal-difference'>0</td> <td class='points'>0</td> </tr>     <tr class='team'>   <td class='position'><span class='no-movement'>No movement</span> <span class='position-number'>2</span></td>   <td class='team-name'>  <a href='http://www.bbc.co.uk/sport/football/teams/germany'>Germany</a>  </td> <td class='played'>0</td> <td class='goal-difference'>0</td> <td class='points'>0</td> </tr>     <tr class='team'>   <td class='position'><span class='no-movement'>No movement</span> <span class='position-number'>3</span></td>   <td class='team-name'>  <a href='http://www.bbc.co.uk/sport/football/teams/netherlands'>Netherlands</a>  </td> <td class='played'>0</td> <td class='goal-difference'>0</td> <td class='points'>0</td> </tr>     <tr class='team'>   <td class='position'><span class='no-movement'>No movement</span> <span class='position-number'>4</span></td>   <td class='team-name'>  <a href='http://www.bbc.co.uk/sport/football/teams/portugal'>Portugal</a>  </td> <td class='played'>0</td> <td class='goal-difference'>0</td> <td class='points'>0</td> </tr>   </tbody>  </table>         <h3 class='competition-name'>Group C</h3>  <table class='table-stats' id='ais_table_119002035'> <caption>UEFA European Championship Group C summary table; it charts each team by position, team name, games played, total goal difference and points</caption>  <thead> <tr class='header'> <th class='position' scope='col' title='Position'>Pos<span>ition</span></th> <th class='team-name' scope='col'>Team</th> <th class='played' scope='col' title='Played'>P<span>layed</span></th> <th class='goal-difference' scope='col' title='Goal Difference'>G<span>oal </span>D<span>ifference</span></th> <th class='points' scope='col' title='Points'>P<span>oin</span>ts</th> </tr> </thead>  <tfoot>   <tr> <td colspan='5'> <p class='full-table-link'><a href='http://www.bbc.co.uk/sport/football/european-championship/table'>View full table</a></p> </td> </tr>    </tfoot>  <tbody>    <tr class='team first'>   <td class='position'><span class='no-movement'>No movement</span> <span class='position-number'>1</span></td>   <td class='team-name'>  <a href='http://www.bbc.co.uk/sport/football/teams/croatia'>Croatia</a>  </td> <td class='played'>0</td> <td class='goal-difference'>0</td> <td class='points'>0</td> </tr>     <tr class='team'>   <td class='position'><span class='no-movement'>No movement</span> <span class='position-number'>2</span></td>   <td class='team-name'>  <a href='http://www.bbc.co.uk/sport/football/teams/italy'>Italy</a>  </td> <td class='played'>0</td> <td class='goal-difference'>0</td> <td class='points'>0</td> </tr>     <tr class='team'>   <td class='position'><span class='no-movement'>No movement</span> <span class='position-number'>3</span></td>   <td class='team-name'>  <a href='http://www.bbc.co.uk/sport/football/teams/republic-of-ireland'>R. of Ireland</a>  </td> <td class='played'>0</td> <td class='goal-difference'>0</td> <td class='points'>0</td> </tr>     <tr class='team'>   <td class='position'><span class='no-movement'>No movement</span> <span class='position-number'>4</span></td>   <td class='team-name'>  <a href='http://www.bbc.co.uk/sport/football/teams/spain'>Spain</a>  </td> <td class='played'>0</td> <td class='goal-difference'>0</td> <td class='points'>0</td> </tr>   </tbody>  </table>         <h3 class='competition-name'>Group D</h3>  <table class='table-stats' id='ais_table_119002035'> <caption>UEFA European Championship Group D summary table; it charts each team by position, team name, games played, total goal difference and points</caption>  <thead> <tr class='header'> <th class='position' scope='col' title='Position'>Pos<span>ition</span></th> <th class='team-name' scope='col'>Team</th> <th class='played' scope='col' title='Played'>P<span>layed</span></th> <th class='goal-difference' scope='col' title='Goal Difference'>G<span>oal </span>D<span>ifference</span></th> <th class='points' scope='col' title='Points'>P<span>oin</span>ts</th> </tr> </thead>  <tfoot>   <tr> <td colspan='5'> <p class='full-table-link'><a href='http://www.bbc.co.uk/sport/football/european-championship/table'>View full table</a></p> </td> </tr>    </tfoot>  <tbody>    <tr class='team first'>   <td class='position'><span class='no-movement'>No movement</span> <span class='position-number'>1</span></td>   <td class='team-name'>  <a href='http://www.bbc.co.uk/sport/football/teams/england'>England</a>  </td> <td class='played'>0</td> <td class='goal-difference'>0</td> <td class='points'>0</td> </tr>     <tr class='team'>   <td class='position'><span class='no-movement'>No movement</span> <span class='position-number'>2</span></td>   <td class='team-name'>  <a href='http://www.bbc.co.uk/sport/football/teams/france'>France</a>  </td> <td class='played'>0</td> <td class='goal-difference'>0</td> <td class='points'>0</td> </tr>     <tr class='team'>   <td class='position'><span class='no-movement'>No movement</span> <span class='position-number'>3</span></td>   <td class='team-name'>  <a href='http://www.bbc.co.uk/sport/football/teams/sweden'>Sweden</a>  </td> <td class='played'>0</td> <td class='goal-difference'>0</td> <td class='points'>0</td> </tr>     <tr class='team'>   <td class='position'><span class='no-movement'>No movement</span> <span class='position-number'>4</span></td>   <td class='team-name'>  <a href='http://www.bbc.co.uk/sport/football/teams/ukraine'>Ukraine</a>  </td> <td class='played'>0</td> <td class='goal-difference'>0</td> <td class='points'>0</td> </tr>   </tbody>  </table>       </div> </div>  \"} } );    ";

    public String teamsPartOfResponse = "<table class='table-stats' id='ais_table_119002035'> <caption>UEFA European Championship Group B summary table; it charts each team by position, team name, games played, total goal difference and points</caption>  <thead> <tr class='header'> <th class='position' scope='col' title='Position'>Pos<span>ition</span></th> <th class='team-name' scope='col'>Team</th> <th class='played' scope='col' title='Played'>P<span>layed</span></th> <th class='goal-difference' scope='col' title='Goal Difference'>G<span>oal </span>D<span>ifference</span></th> <th class='points' scope='col' title='Points'>P<span>oin</span>ts</th> </tr> </thead>  <tfoot>   <tr> <td colspan='5'> <p class='full-table-link'><a href='http://www.bbc.co.uk/sport/football/european-championship/table'>View full table</a></p> </td> </tr>    </tfoot>  <tbody>    " +
            "<tr class='team first'>   <td class='position'><span class='no-movement'>No movement</span> <span class='position-number'>1</span></td>   <td class='team-name'>  <a href='http://www.bbc.co.uk/sport/football/teams/denmark'>Denmark</a>  </td> <td class='played'>0</td> <td class='goal-difference'>0</td> <td class='points'>0</td> </tr>     " +
            "<tr class='team'>   <td class='position'><span class='no-movement'>No movement</span> <span class='position-number'>2</span></td>   <td class='team-name'>  <a href='http://www.bbc.co.uk/sport/football/teams/germany'>Germany</a>  </td> <td class='played'>0</td> <td class='goal-difference'>0</td> <td class='points'>0</td> </tr>     " +
            "<tr class='team'>   <td class='position'><span class='no-movement'>No movement</span> <span class='position-number'>3</span></td>   <td class='team-name'>  <a href='http://www.bbc.co.uk/sport/football/teams/netherlands'>Netherlands</a>  </td> <td class='played'>0</td> <td class='goal-difference'>0</td> <td class='points'>0</td> </tr>     " +
            "<tr class='team'>   <td class='position'><span class='no-movement'>No movement</span> <span class='position-number'>4</span></td>   <td class='team-name'>  <a href='http://www.bbc.co.uk/sport/football/teams/portugal'>Portugal</a>  </td> <td class='played'>0</td> <td class='goal-difference'>0</td> <td class='points'>0</td> </tr>   " +
            "</tbody>  </table>";

    @Test
    public void parseGroupsFromResponse() {
        List<Group> groups = Group.parseResponse(response);
        assertEquals(4, groups.size());
        assertEquals("Group A", groups.get(0).name);
        assertEquals("Group D", groups.get(3).name);

        assertEquals(4, groups.get(0).teams.size());
    }

    @Test
    public void parseTeamsFromResponse() {
        List<Team> teams = Group.parseTeams(teamsPartOfResponse);
        assertEquals(4, teams.size());
        assertEquals("Denmark", teams.get(0).name);
        assertEquals("Germany", teams.get(1).name);
        assertEquals("Netherlands", teams.get(2).name);
        assertEquals("Portugal", teams.get(3).name);

        assertEquals("No movement", teams.get(0).movement);
        assertEquals("http://www.bbc.co.uk/sport/football/teams/netherlands", teams.get(2).url);
        assertEquals(4, teams.get(3).position);
    }


}
